(function (document, window, angular, undefined) { 'use strict';angular.module("mobie.components",["mobie.components.animation","mobie.components.sidenav","mobie.components.backdrop","mobie.components.popup","mobie.components.modal","mobie.components.bar","mobie.components.icon"]),angular.module("mobie",["mobie.core","mobie.components"]),angular.module("mobie.core",["mobie.core.helpers","mobie.core.registry","mobie.core.eventemitter","mobie.core.scroll","mobie.core.component"]);
function AnimationDirective(){return function(n,i,t){function a(n){e="";var i=n.split(/\ /),t=i.length;angular.forEach(i,function(n,i){e+="mb-"+n,t>i&&(e+=" ")})}function o(n){i.hasClass(n)&&i.removeClass(n)}function r(n){i.addClass(n)}var e;t.$observe("mbAnimation",function(n){angular.isString(e)&&o(e),a(n),r(e)})}}angular.module("mobie.components.animation",[]).directive("mbAnimationDuration",function(){return function(n,i,t){function a(n){angular.isUndefined(n)||""===n||(n+="ms"),i.css("-webkit-animation-duration",n),i.css("-moz-animation-duration",n),i.css("animation-duration",n)}t.$observe("mbAnimationDuration",function(n){return angular.isUndefined(n)?a(void 0):void a(n)})}}).directive("mbAnimation",AnimationDirective);
function BackdropFactory(a,o){var e=angular.element(document.body),r=angular.element("<div>");r.addClass("backdrop mb-backdrop"),a.enter(r,e);var n=new o(r,"default-backdrop");return n}BackdropFactory.$inject=["$animate","MbComponent"],angular.module("mobie.components.backdrop",["mobie.core.component"]).factory("$mbBackdrop",BackdropFactory);
function BarFixedTopDirective(n,e,o,i,r){function t(e,t,c){function u(){return o.cancel(a)}function l(n){return r.safeDigest(e,function(){u(),a=o(f).then(function(){return s[n?"show":"hide"]()})})}var a,f=60,s=new i(t),m=!0;n.on("scrollTop",function(){l(!0)}),n.on("scrollDown",function(n){l(!1)}),n.on("scrollUp",function(n){l(!0)}),l(m)}return{restrict:"A",compile:function(n,e){return n.addClass("mb-fixed-top"),t}}}BarFixedTopDirective.$inject=["$mbScroll","$animate","$timeout","MbComponent","Helpers"],angular.module("mobie.components.bar",["mobie.core.scroll"]).directive("mbBarFixedTop",BarFixedTopDirective);
angular.module("mobie.components.icon",[]).directive("mbIcon",function(){return{restrict:"EA",scope:{name:"@"},template:'<span ng-class="classes" ng-show="hasIconName"></span>',controller:["$scope","$attrs",function(s,e){s.classes={fa:!0},e.$observe("name",function(e){s.hasIconName=e?s.classes["fa-"+e]=!0:!1})}]}});
function $MbModalProvider(){function o(o,n,t,a,i){var l=angular.element(document.body);return function(m){m=angular.extend({},e,m);var r=o(m),s=m.scope,d=r.component;return d.on("visibleChangeStart",function(){t.show(),n.addClass(l,m.activeBodyClass)}),d.on("notVisible",function(){a.safeDigest(s,function(){i(function(){t.hide()},250),n.removeClass(l,m.activeBodyClass)})}),r}}var e=this.defaults={templateUrl:"components/modal/modal.html",activeBodyClass:"mb-modal-visible"};o.$inject=["$mbComponent","$animate","$mbBackdrop","Helpers","$timeout"],this.$get=o}angular.module("mobie.components.modal",["mobie.core.component","mobie.core.helpers","mobie.components.backdrop"]).provider("$mbModal",$MbModalProvider);
function $MbPopupProvider(){function n(n,e,o,u,r,i,c){function a(){return f().then(function(){return C.hide()})}function p(n){e.safeDigest(x,n)}function f(){return i(function(n){p(function(t){n(t)})})}function l(){return f().then(function(){E.off("click",a)})}function s(){return f().then(function(){E.on("click",a)})}function m(n){return f().then(function(){return r[n?"addClass":"removeClass"](bodyEl,P.activeBodyClass)})}function d(n){return f().then(function(){return u[n?"show":"hide"]()})}function h(){return w.getVisibleState()}function b(n){return f().then(function(){return w[n?"show":"hide"]()})}function $(n){return i.all([b(!1),d(n),m(!1)]).then(function(){return l()})}function v(){g({text:"",title:"",template:"",buttons:[]})}function g(n){p(function(t){angular.extend(t,n)})}function y(n){return h()?$(!0).then(function(){return y(n)}):(v(),g(n),angular.forEach(x.buttons,function(n,t){angular.isFunction(n.onTap)||(x.buttons[t].onTap=a)}),i.all([b(!0),d(!0),m(!0)]).then(function(){return s()}))}var C={},P={scope:o.$new()};P=angular.extend({},t,P);var k=C.component=n(P),w=k.component,E=w.getElement(),x=P.scope;return C.show=y,C.hide=$,C}this.$get=n;var t=this.defaults={templateUrl:"components/popup/popup.html",activeBodyClass:"mb-popup-visible"};n.$inject=["$mbComponent","Helpers","$rootScope","$mbBackdrop","$animate","$q","$timeout"]}var bodyEl=angular.element(document.body);angular.module("mobie.components.popup",["mobie.core.helpers","mobie.core.component","mobie.components.backdrop"]).provider("$mbPopup",$MbPopupProvider);
function $MbSidenavController(e,n,i,o,t,r,c,a,l,s,d){function m(n){return r.safeDigest(e,n)}function u(e){m(function(){l[e?"show":"hide"](),angular.isString($)&&t[e?"addClass":"removeClass"](b,$)})}function v(e){m(function(){g.hide()})}var b=angular.element(d.document.body),f=l.getElement(),p=s.getOptions(),$=p.activeBodyClass,g=this.component=new c(n,{id:i.componentId});a.register(this.component),g.on("visibleChangeStart",function(){u(!0)}),g.on("visible",function(){f.on("click",v)}),g.on("notVisible",function(){f.off("click",v),u(!1)})}function CloseDirective(){return{require:"?^mbSidenav",link:function(e,n,i,o){angular.isUndefined(o)||n.on("click",function(){e.$apply(function(){o.component.hide()})})}}}function $MbSidenavProvider(){function e(e){return angular.extend(function(n){return e.get(n)},{getOptions:function(){return n}})}var n=this.defaults={activeBodyClass:"mb-sidenav-visible"};e.$inject=["$mbComponentRegistry"],this.$get=e}function SidenavDirective(){return{restrict:"EA",scope:{},controller:"$mbSidenavController",controllerAs:"mbSidenavCtrl"}}$MbSidenavController.$inject=["$scope","$element","$attrs","$transclude","$animate","Helpers","MbComponent","$mbComponentRegistry","$mbBackdrop","$mbSidenav","$window"],angular.module("mobie.components.sidenav",["mobie.components.animation","mobie.components.backdrop","mobie.core.registry","mobie.core.component","mobie.core.helpers"]).directive("mbClose",CloseDirective).controller("$mbSidenavController",$MbSidenavController).provider("$mbSidenav",$MbSidenavProvider).directive("mbSidenav",SidenavDirective);
function MbComponentFactory(e,t){var n=e.extend({initialize:function(e,t,n){this.isVisible=!1,angular.isObject(t)&&(n=t,t=void 0,angular.extend(this,n)),angular.isDefined(e)&&this.setElement(e),angular.isDefined(t)&&this.setId(t),this.on("visibleStateChangeSuccess",function(){this.emit(this.getVisibleState()?"visible":"notVisible")}),this.on("visibleStateChangeStart",function(e){this.emit(e?"visibleChangeStart":"notVisibleChangeStart")})},show:function(){return this.setVisibleState(!0)},hide:function(){return this.setVisibleState(!1)},toggle:function(){return this.setVisibleState(!this.getVisibleState())},getHiddenClass:function(){return"mb-hidden"},getVisibleClass:function(){return"mb-visible"},getVisibleState:function(){return!!this.isVisible},setVisibleState:function(e){var n,i,o=this,s=this.getElement(),a=this.getHiddenClass(),r=this.getVisibleClass();return this.emit("visibleStateChangeStart",e),n=e?r:a,i=e?a:r,t.setClass(s,n,i).then(function(){o.isVisible=e,o.emit("visibleStateChangeSuccess")},function(e){o.emit("visibleStateChangeError",e)})},setId:function(e){if(angular.isDefined(this.getId()))throw new Error("You cannot change a component.id more than once");return Object.defineProperty(this,"id",{value:e,writable:!1}),this},getId:function(){return this.id},setElement:function(e){var t=this.componentEl=e,n=this.getVisibleState(),i=this.getHiddenClass();return t.hasClass(i)||n||t.addClass(i),this},getElement:function(){return this.componentEl},enterElement:function(e,n){var i=this;return angular.isUndefined(e)&&(e=angular.element(document.body)),this.emit("enterElementStart"),t.enter(this.getElement(),e,n).then(function(){i.emit("enterElementSuccess")})},removeElement:function(){return this.getElement().remove(),this.componentEl=void 0,this},leaveElement:function(){var e=this;return this.emit("leaveElementStart"),t.leave(this.getElement()).then(function(){e.emit("leaveElementSuccess")})},destroy:function(){this.removeElement()}});return n}function MbComponentInterface(e){return e.createClass({show:e.notImplemented("show"),hide:e.notImplemented("hide"),toggle:e.notImplemented("toggle"),setElement:e.notImplemented("setElement"),getElement:e.notImplemented("getElement"),setId:e.notImplemented("setId"),getId:e.notImplemented("getId"),destroy:e.notImplemented("destroy"),getVisibleState:e.notImplemented("getVisibleState"),setVisibleState:e.notImplemented("setVisibleState")})}function $MbComponentProvider(){function e(e,n,i,o,s){var a=angular.element(document.body);return function(r){var l,m,c={};angular.isString(r)&&(m=r,r={},r.template=m),c.options=r=angular.extend({},t,r),angular.isUndefined(r.scope)&&(r.scope=s.$new());var u=r.scope=c.scope=r.scope.$new(),h=r.component=c.component=new e;if(u.$on("$destroy",function(){h.destroy(),l=void 0}),angular.forEach(["show","hide","toggle"],function(e){c[e]=function(){return h[e]()}}),angular.isUndefined(r.template)&&angular.isDefined(r.templateUrl)&&(m=r.template=i.get(r.templateUrl)),angular.isUndefined(r.template))throw new Error("template must have something");l=r.el=c.element=angular.element(r.template);var d=c.componentLink=n(l);return h.once("visibleChangeStart",function(){d(u)}),o.enter(l,a).then(function(){h.emit("enter")}),h.setElement(l),c}}var t=this.defaults={};e.$inject=["MbComponent","$compile","$templateCache","$animate","$rootScope"],this.$get=e}MbComponentFactory.$inject=["MbComponentInterface","$animate"],MbComponentInterface.$inject=["Helpers"],angular.module("mobie.core.component",["mobie.core.helpers","mobie.components.animation"]).factory("MbComponentInterface",MbComponentInterface).factory("MbComponent",MbComponentFactory).provider("$mbComponent",$MbComponentProvider);
function EventEmitter(){EventEmitter.init.call(this)}function EventEmitterFactory(){return EventEmitter}EventEmitter.EventEmitter=EventEmitter,EventEmitter.usingDomains=!1,EventEmitter.prototype.domain=void 0,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.init=function(){this.domain=null,EventEmitter.usingDomains&&(domain=domain||require("domain"),!domain.active||this instanceof domain.Domain||(this.domain=domain.active)),this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events={}),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(e){if(!utilangularisNumber(e)||0>e||isNaN(e))throw new TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,i,s,r,o;if(this._events||(this._events={}),"error"===e&&!this._events.error){if(t=arguments[1],!this.domain)throw t instanceof Error?t:Error('Uncaught, unspecified "error" event.');return t||(t=new Error('Uncaught, unspecified "error" event.')),t.domainEmitter=this,t.domain=this.domain,t.domainThrown=!1,this.domain.emit("error",t),!1}if(n=this._events[e],angular.isUndefined(n))return!1;if(this.domain&&this!==process&&this.domain.enter(),angular.isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),r=1;i>r;r++)s[r-1]=arguments[r];n.apply(this,s)}else if(angular.isObject(n)){for(i=arguments.length,s=new Array(i-1),r=1;i>r;r++)s[r-1]=arguments[r];for(o=n.slice(),i=o.length,r=0;i>r;r++)o[r].apply(this,s)}return this.domain&&this!==process&&this.domain.exit(),!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!angular.isFunction(t))throw new TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,angular.isFunction(t.listener)?t.listener:t),this._events[e]?angular.isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,angular.isObject(this._events[e])&&!this._events[e].warned){var n;n=angular.isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d %s listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length,e),console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!angular.isFunction(t))throw new TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,i,s,r;if(!angular.isFunction(t))throw new TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||angular.isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(angular.isObject(n)){for(r=s;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){i=r;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],angular.isFunction(n))this.removeListener(e,n);else if(Array.isArray(n))for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?angular.isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?angular.isFunction(e._events[t])?1:e._events[t].length:0},angular.module("mobie.core.eventemitter",[]).factory("EventEmitter",EventEmitterFactory);
function extend(t,e){var r,n=this;r=t&&angular.hasOwnProperty(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},angular.extend(r,n,e);var o=function(){this.constructor=r};return o.prototype=n.prototype,r.prototype=new o,t&&angular.extend(r.prototype,t),r.__super__=n.prototype,r}function inherits(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function DefaultClass(){angular.isFunction(this.initialize)&&this.initialize.apply(this,arguments)}function createClass(t,e){return DefaultClass.extend(t,e)}function HelpersFactory(t,e,r){function n(t){return e.reject(new Error("The method "+t+" is not implemented"))}function o(e,r){angular.isFunction(e)&&(r=e,e=t),angular.isUndefined(r)&&(r=function(){}),e.$$phase||e.$root&&e.$root.$$phase?r(e):e.$apply(r)}function a(){return s++,s}var i={};DefaultClass.extend=extend,inherits(DefaultClass,r),i.createClass=createClass,i.notImplemented=n,i.safeDigest=o;var s=0;return i.nextId=a,i}function UtilFactory(){var t={};return t.inherits=inherits,t}HelpersFactory.$inject=["$rootScope","$q","EventEmitter"],angular.module("mobie.core.helpers",["mobie.core.eventemitter"]).factory("Helpers",HelpersFactory).factory("Util",UtilFactory);
angular.module("mobie.core.registry",["mobie.core.helpers"]).factory("$mbComponentRegistry",function(){var n=[],e={get:function(e){var r;if(angular.forEach(n,function(n){n.id===e&&(r=n)}),angular.isUndefined(r))throw new Error('component "'+e+'" is not defined');return r},register:function(e,r){function i(){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}if(angular.isUndefined(e.id)&&angular.isUndefined(r))throw new Error("component must have a id key or you must specify one for this instance");return angular.isUndefined(e.id)&&(e.id=r),n.push(e),i}};return e});
function $MbScrollProvider(){function o(o,t,r){var s=angular.element(o),c=(s[0].document.body,r.createClass({scrollStoppedFn:function(o){this.emit("scrollStop",o)},initialize:function(){var o=this;s.on("scroll",function(l){o.emit("scroll",l)}),this.on("scroll",this.onScroll),this.on("scrollStop",this.onScrollStop),Object.defineProperty(this,"scrollY",{get:function(){return this.getScrollY()}})},getLastScrollY:function(){return this.lastScrollY},setLastScrollY:function(o){this.lastScrollY=o},getScrollY:function(){return s.prop("scrollY")},onScrollStop:function(){this.setLastScrollY(this.getScrollY())},onScroll:function(o){var r=window.scrollY,s=this;t.cancel(this.scrollStoppedPromise),0===r&&this.emit("scrollTop",o),r>this.lastScrollY?this.emit("scrollDown",o):this.emit("scrollUp",o),this.scrollStoppedPromise=t(l.scrollStoppedMs).then(function(){s.scrollStoppedFn(o)})}}));return new c}this.$get=o;var l=this.defaults={scrollStoppedMs:100};o.$inject=["$window","$timeout","Helpers"]}angular.module("mobie.core.scroll",["mobie.core.helpers"]).provider("$mbScroll",$MbScrollProvider);}(document, window, angular, undefined))