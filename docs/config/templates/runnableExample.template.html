{# Be aware that we need these extra new lines here or marked will not realise that the <div>
   is HTML and wrap each line in a <p> - thus breaking the HTML #}


<div class="runnable-example"
    path="{$ doc.example.deployments.default.path $}"
    {%- for attrName, attrValue in doc.example.attributes %}
    {$ attrName $}="{$ attrValue $}"{% endfor %}>

 {% for fileName, file in doc.example.files %}
  <div mb-highlight mb-highlight-no-strip class="runnable-example-file" {% for attrName, attrValue in file.attributes %}
    {$ attrName $}="{$ attrValue $}"{% endfor %}>
    {% code -%}
    {$ file.fileContents $}
    {%- endcode %}
  </div>
{% endfor %}

  <div class="runnable-example-frame">
    <iframe src="{$ doc.example.deployments.default.outputPath $}" name="{$ doc.example.id $}"></iframe>
  </div>
</div>


{# Be aware that we need these extra new lines here or marked will not realise that the <div>
   above is HTML and wrap each line in a <p> - thus breaking the HTML #}